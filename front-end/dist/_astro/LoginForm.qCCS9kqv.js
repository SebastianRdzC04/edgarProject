import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.BVOCwoKb.js";function b(){const[n,m]=t.useState(""),[l,x]=t.useState(""),[r,c]=t.useState(!1),[i,d]=t.useState({show:!1,type:"",message:""}),a={base:{padding:"10px",marginBottom:"16px",borderRadius:"4px"},success:{backgroundColor:"#d1fae5",color:"#065f46"},error:{backgroundColor:"#fee2e2",color:"#b91c1c"}},f={display:"inline-block",marginRight:"8px",animation:"spin 1s linear infinite"},p=(s,o)=>{d({show:!0,type:s,message:o}),setTimeout(()=>{d({show:!1,type:"",message:""})},3e3)},h=async s=>{s.preventDefault(),c(!0);try{const o=await fetch("http://localhost:705/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:l})}),u=await o.json();if(!o.ok)throw new Error(u.message||"Error al iniciar sesión");localStorage.setItem("token",u.token),p("success","Bienvenido al sistema del consultorio médico"),window.location.href="/"}catch(o){p("error",o.message||"Ocurrió un error al iniciar sesión")}finally{c(!1)}};return e.jsxs("div",{children:[e.jsx("style",{children:`
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                `}),i.show&&e.jsx("div",{style:{...a.base,...i.type==="success"?a.success:a.error},children:i.message}),e.jsxs("form",{onSubmit:h,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{htmlFor:"email",children:"Correo electrónico"}),e.jsx("input",{id:"email",type:"email",placeholder:"correo@ejemplo.com",value:n,onChange:s=>m(s.target.value),required:!0,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{htmlFor:"password",children:"Contraseña"}),e.jsx("input",{id:"password",type:"password",value:l,onChange:s=>x(s.target.value),required:!0,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsx("button",{type:"submit",disabled:r,style:{padding:"10px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:r?"not-allowed":"pointer",opacity:r?.7:1},children:r?e.jsxs("span",{children:[e.jsx("span",{style:f,children:"◌"}),"Cargando..."]}):"Iniciar Sesión"})]})]})}export{b as default};
