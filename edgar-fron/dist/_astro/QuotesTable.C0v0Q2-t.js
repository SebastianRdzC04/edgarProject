import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.BVOCwoKb.js";const u=()=>{const[r,c]=a.useState([]),[i,n]=a.useState(!0),[l,d]=a.useState(null);a.useEffect(()=>{(async()=>{try{const t=await fetch("https://apiedgar.kysedomi.lat/quotes/all");if(!t.ok)throw new Error("Failed to fetch quotes");const h=await t.json();c(h)}catch(t){d(t instanceof Error?t.message:"An error occurred")}finally{n(!1)}})()},[]);const o=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s),x=s=>{switch(s.toLowerCase()){case"pendiente":return"bg-yellow-100 text-yellow-800";case"aprobada":return"bg-green-100 text-green-800";case"rechazada":return"bg-red-100 text-red-800";case"completada":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return i?e.jsx("div",{className:"overflow-hidden bg-white shadow-md rounded-xl w-full p-6",children:e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-800"})})}):l?e.jsx("div",{className:"overflow-hidden bg-white shadow-md rounded-xl w-full p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 h-40 text-red-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("p",{className:"text-lg font-medium",children:["Error: ",l]})]})}):e.jsxs("div",{className:"overflow-hidden bg-white shadow-md rounded-xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-800 text-white flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold",children:["Cotizaciones ",e.jsx("span",{className:"text-blue-300",children:"Recientes"})]}),e.jsx("p",{className:"mt-2 text-gray-300",children:"Lista de cotizaciones de servicios de construcción."})]}),e.jsx("div",{children:e.jsxs("button",{className:"px-4 py-2 bg-blue-300 text-black font-bold rounded-lg hover:bg-blue-400 transition duration-300 flex items-center shadow-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Nueva Cotización"]})})]}),e.jsx("div",{className:"w-full",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Título"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title}),e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:s.address})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.user.username}),e.jsx("div",{className:"text-xs text-gray-500",children:s.user.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:o(s.price)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{className:"px-3 py-1.5 bg-gray-800 text-white rounded hover:bg-gray-700 transition-colors",children:"Detalles"})})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-lg font-medium",children:"No hay cotizaciones disponibles"})]})})})})]})}),r.length>0&&e.jsxs("div",{className:"px-6 py-4 bg-gray-100 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:r.length})," cotizaciones en total"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{className:"px-3 py-1.5 bg-gray-800 text-white border border-gray-800 rounded hover:bg-gray-700 transition-colors",children:"Exportar"})})]})]})};export{u as default};
