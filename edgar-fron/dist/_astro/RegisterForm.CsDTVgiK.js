import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.BVOCwoKb.js";function w(){const[n,l]=t.useState(""),[d,c]=t.useState(""),[p,u]=t.useState(""),[o,x]=t.useState(!1),[a,m]=t.useState({show:!1,type:"",message:""}),i={base:{padding:"10px",marginBottom:"16px",borderRadius:"4px"},success:{backgroundColor:"#d1fae5",color:"#065f46"},error:{backgroundColor:"#fee2e2",color:"#b91c1c"}},h={display:"inline-block",marginRight:"8px",animation:"spin 1s linear infinite"},g=(r,s)=>{m({show:!0,type:r,message:s}),setTimeout(()=>{m({show:!1,type:"",message:""})},3e3)},f=async r=>{r.preventDefault(),x(!0);try{const s=await fetch("https://apiedgar.kysedomi.lat/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,email:d,password:p})}),y=await s.json();if(!s.ok)throw new Error(y.message||"Error al registrarse");g("success","Tu cuenta ha sido creada correctamente. Ahora puedes iniciar sesión."),l(""),c(""),u("")}catch(s){g("error",s.message||"Ocurrió un error al registrarse")}finally{x(!1)}};return e.jsxs("div",{children:[e.jsx("style",{children:`
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                `}),a.show&&e.jsx("div",{style:{...i.base,...a.type==="success"?i.success:i.error},children:a.message}),e.jsxs("form",{onSubmit:f,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{htmlFor:"username",children:"Nombre de usuario"}),e.jsx("input",{id:"username",type:"text",placeholder:"usuario123",value:n,onChange:r=>l(r.target.value),required:!0,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{htmlFor:"email-register",children:"Correo electrónico"}),e.jsx("input",{id:"email-register",type:"email",placeholder:"correo@ejemplo.com",value:d,onChange:r=>c(r.target.value),required:!0,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{htmlFor:"password-register",children:"Contraseña"}),e.jsx("input",{id:"password-register",type:"password",value:p,onChange:r=>u(r.target.value),required:!0,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsx("button",{type:"submit",disabled:o,style:{padding:"10px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer",opacity:o?.7:1,width:"100%"},children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:h,children:"◌"}),"Procesando..."]}):"Registrarse"})]})]})}export{w as default};
